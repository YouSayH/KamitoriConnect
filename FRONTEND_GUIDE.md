# フロントエンド技術ガイド (Node.js, React, Next.js)

このプロジェクトで使用されているフロントエンド技術の基礎概念と使い方を解説します。

## 1. Node.js とは？
サーバーサイドでJavaScriptを実行するための**ランタイム環境**です。これがあることで、ブラウザ以外の場所（PCやサーバー）でJSを動かせます。

### 本プロジェクトでの役割
- 開発サーバーの起動 (`npm run dev`)
- パッケージ（ライブラリ）の管理 (`npm install`)
- ビルドツールとしての動作 (`Next.js` は Node.js 上で動くプログラムです)

### よく使うコマンド
- **`npm install`**: `package.json` に書かれたライブラリをダウンロード・インストールします。最初に1回実行します。
- **`npm run dev`**: 開発用サーバーを立ち上げます。コードを保存すると自動で画面が更新されます。
- **`npm run build`**: 本番用にコードを最適化（軽量化）して出力します。

---

## 2. React とは？
ユーザーインターフェース (UI) を構築するための **JavaScriptライブラリ** です。

### 主な特徴: コンポーネント指向
画面を「部品（コンポーネント）」に分けて作ります。
例えば、`Button` や `Header` などを部品として作り、それを組み合わせてページを作ります。

### 基本的な書き方 (JSX)
JavaScriptの中にHTMLのようなタグを書くことができます。
```tsx
function MyButton() {
  return <button className="bg-blue-500">Click me</button>;
}
```

### 重要な機能: Hooks (フック)
データの変更を画面に反映させるための仕組みです。
- **`useState`**: データの状態を管理します。（例：入力された文字、開いている/閉じているフラグ）
    ```tsx
    const [count, setCount] = useState(0); // countという変数を定義
    // setCount(5) とすると、countが5になり、画面も自動で書き換わる
    ```
- **`useEffect`**: 画面表示時などに特定の処理（API通信など）を実行します。

---

## 3. Next.js とは？
Reactをベースにした **Webフレームワーク** です。React単体では面倒な部分（ルーティング、画像最適化、SEO設定など）を自動でやってくれます。

### App Router (ファイルベースルーティング)
フォルダ構造がそのままURLになります。
- ファイル: `frontend/app/page.tsx`
    - URL: `http://localhost:3000/`
- ファイル: `frontend/app/about/page.tsx`
    - URL: `http://localhost:3000/about`
- ファイル: `frontend/app/shops/[id]/page.tsx`
    - URL: `http://localhost:3000/shops/1` (動的なID)

### Server Components vs Client Components
Next.js 13以降 (App Router) の重要な概念です。

1.  **Server Components (デフォルト)**
    - サーバー側でレンダリング（HTML生成）されます。
    - **メリット**: 高速、SEOに強い、APIキーなどを隠せる。
    - **制限**: `useState` や `onClick` などのインタラクティブな機能は使えません。

2.  **Client Components**
    - ファイルの先頭に `"use client"` と書くとこれになります。
    - ブラウザ側で動きます。
    - `useState`, `useEffect`, イベントリスナー (`onClick`) を使う場合はこれにする必要があります。
    - **本プロジェクト**: `admin` 画面や `chat` 画面など、ユーザー操作が多い部分は `"use client"` を使用しています。

---

## 4. ディレクトリ構成 (どこに何がある？)

プロジェクト内の主要なフォルダの役割を説明します。迷ったらここを確認してください。

### `app/` (メインの場所)
- **役割**: ページやルーティングを管理する場所です。
- **中身**:
    - `page.tsx`: 各ページのメインのコード。
    - `layout.tsx`: ページの枠組み（ヘッダーやフッターなど）。
    - フォルダ (`admin`, `shops` 等): URLに対応します。

### `components/` (部品入れ)
- **役割**: ページ内で使う「部品」を入れておく場所です。
- **中身**:
    - `ui/`: ボタンやカードなど、汎用的な小さな部品 (Shadcn UI)。
    - その他: ヘッダーや特定の機能ごとの大きな部品。

### `lib/` (便利な道具箱)
- **役割**: API通信や計算処理など、画面表示以外の便利機能（ユーティリティ）を置きます。
- **重要ファイル**:
    - `api.ts`: バックエンドと通信するための設定ファイル。

### `public/` (静的ファイル)
- **役割**: 画像やフォントなど、変更しないファイルを置きます。
- ここに置いたファイルは `http://localhost:3000/image.png` のように直接アクセスできます。

### その他の重要なファイル
- `package.json`: プロジェクトの情報や、使用しているライブラリの一覧が書かれています。
- `next.config.ts`: Next.jsの設定ファイル。

---

## まとめ: 開発の流れ

1.  **ページを作る**: `app/` フォルダの中に新しいフォルダと `page.tsx` を作る。
2.  **UIを作る**: Reactコンポーネントとして、HTMLっぽいタグ (JSX) で見た目を記述する。
3.  **動きをつける**: ボタンクリックなどの動作が必要なら `"use client"` を付けて `useState` を使う。
4.  **データをつなぐ**: Backend (FastAPI) と通信するために `api.ts` (Axios) を使ってデータを取得・送信する。
